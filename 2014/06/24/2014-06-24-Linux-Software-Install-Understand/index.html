<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ketao1989.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-2}},"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="说明：来自互联网，如有版权问题，请告知本人将其撤下。 来源：http:&#x2F;&#x2F;works.jinbuguo.com&#x2F;linux&#x2F;understand_package_install.html 前言从源代码安装过软件的朋友一定对 .&#x2F;configure &amp;&amp; make &amp;&amp; make install 安装三步曲非常熟悉了。然而究竟这个过程中的每一步幕后都发生了些什么呢？本">
<meta property="og:type" content="article">
<meta property="og:title" content="深入理解软件包的配置、编译与安装">
<meta property="og:url" content="https://ketao1989.github.io/2014/06/24/2014-06-24-Linux-Software-Install-Understand/index.html">
<meta property="og:site_name" content="没有期望的分布">
<meta property="og:description" content="说明：来自互联网，如有版权问题，请告知本人将其撤下。 来源：http:&#x2F;&#x2F;works.jinbuguo.com&#x2F;linux&#x2F;understand_package_install.html 前言从源代码安装过软件的朋友一定对 .&#x2F;configure &amp;&amp; make &amp;&amp; make install 安装三步曲非常熟悉了。然而究竟这个过程中的每一步幕后都发生了些什么呢？本">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2014-06-24T14:21:35.000Z">
<meta property="article:modified_time" content="2021-05-17T14:57:11.572Z">
<meta property="article:author" content="柯小小西">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ketao1989.github.io/2014/06/24/2014-06-24-Linux-Software-Install-Understand/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>深入理解软件包的配置、编译与安装 | 没有期望的分布</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a1fa00c4b9eadffbe9a1316cc5e43d91";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">没有期望的分布</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">柯小西-技术博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ketao1989.github.io/2014/06/24/2014-06-24-Linux-Software-Install-Understand/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.gif">
      <meta itemprop="name" content="柯小小西">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="没有期望的分布">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          深入理解软件包的配置、编译与安装
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-06-24 22:21:35" itemprop="dateCreated datePublished" datetime="2014-06-24T22:21:35+08:00">2014-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-17 22:57:11" itemprop="dateModified" datetime="2021-05-17T22:57:11+08:00">2021-05-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>说明：来自互联网，如有版权问题，请告知本人将其撤下。</p>
<p>来源：<a target="_blank" rel="noopener" href="http://works.jinbuguo.com/linux/understand_package_install.htm">http://works.jinbuguo.com/linux/understand_package_install.htm</a>l</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a><a id="Intro">前言</a></h2><p>从源代码安装过软件的朋友一定对 <code>./configure &amp;&amp; make &amp;&amp; make install</code> 安装三步曲非常熟悉了。然而究竟这个过程中的每一步幕后都发生了些什么呢？本文将带领你一探究竟。深入理解这个过程将有助于你在LFS的基础上玩出自己的花样来。不过需要说明的是本文对 <code>Makefile</code> 和 <code>make</code> 的讲解是相当近视和粗浅的，但是对于理解安装过程来说足够了。</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a><a id="About">概述</a></h2><p>用一句话来解释这个过程就是：</p>
<p>根据源码包中 Makefile.in 文件的指示，configure 脚本检查当前的系统环境和配置选项，在当前目录中生成 <code>Makefile</code> 文件(还有其它本文无需关心的文件)，然后 <code>make</code> 程序就按照当前目录中的 Makefile 文件的指示将源代码编译为二进制文件，最后将这些二进制文件移动(即安装)到指定的地方(仍然按照 <code>Makefile</code> 文件的指示)。</p>
<p>由此可见 Makefile 文件是幕后的核心。要深入理解安装过程，必须首先对 <code>Makefile</code> 文件有充分的了解。本文将首先讲述 <code>Makefile</code> 与 <code>make</code> ，然后再讲述 <code>configure</code> 脚本。并且在讲述这两部分内容时，提供了尽可能详细的、可以运用于实践的参考资料。</p>
<h2 id="Makefile-与-make"><a href="#Makefile-与-make" class="headerlink" title="Makefile 与 make"></a><a id="Make">Makefile 与 make</a></h2><p>用一句话来概括<code>Makefile</code> 与 <code>make</code> 的关系就是：</p>
<p><code>Makefile</code> 包含了所有的规则和目标，而 <code>make</code> 则是为了完成目标而去解释 <code>Makefiel</code> 规则的工具。</p>
<span id="more"></span>

<h3 id="make-语法"><a href="#make-语法" class="headerlink" title="make 语法"></a>make 语法</h3><p>首先看看 <code>make</code> 的命令行语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">make [options] [targets] [VAR=VALUE]...</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>[options]</code>是命令行选项，可以用 <code>make --help</code> 命令查看全部，<code>[VAR=VALUE]</code>是在命令行上指定环境变量，这两个大家都很熟悉，将在稍后详细讲解。而<code>[targets]</code>是什么呢？字面的意思是”目标”，也就是希望本次 make 命令所完成的任务。凭经验猜测，这个<code>[targets]</code>大概可以用”check”,”install”之类(也就是常见的测试和安装命令)。但是它到底是个啥玩意儿？不带任何”目标”的 <code>make</code> 命令是什么意思？为什么在安装 LFS 工具链中的 Perl-5.8.8 软件包时会出现”make perl utilities”这样怪异的命令？要回答这些问题必须首先理解 <code>Makefile</code> 文件中的”规则”。</p>
<h3 id="Makefile-规则"><a href="#Makefile-规则" class="headerlink" title="Makefile 规则"></a>Makefile 规则</h3><p>Makefile 规则包含了文件之间的依赖关系和更新此规则目标所需要的命令。</p>
<p>一个简单的 Makefile 规则是这样写的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">TARGET : PREREQUISITES</span><br><span class="line">	COMMAND</span><br><span class="line">TARGET</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>规则的目标。也就是可以被 make 使用的”目标”。有些目标可以没有依赖而只有动作(命令行)，比如”clean”，通常仅仅定义一系列删除中间文件的命令。同样，有些目标可以没有动作而只有依赖，比如”all”，通常仅仅用作”终极目标”。</p>
<p><code>PREREQUISITES</code><br>规则的依赖。通常一个目标依赖于一个或者多个文件。</p>
<p><code>COMMAND</code><br>规则的命令行。一个规则可以有零个或多个命令行。</p>
<p>OK! 现在你明白[targets]是什么了，原来它们来自于 <code>Makefile</code> 文件中一条条规则的目标(TARGET)。另外，<code>Makefile</code>文件中第一条规则的目标被称为”终极目标”，也就是你省略[targets]参数时的目标(通常为”all”)。</p>
<p>当你查看一个实际的 <code>Makefile</code> 文件时，你会发现有些规则非常复杂，但是它都符合规则的基本格式。此外，<code>Makefile</code> 文件中通常还包含了除规则以外的其它很多东西，不过本文只关心其中的变量。</p>
<h3 id="Makefile-实例"><a href="#Makefile-实例" class="headerlink" title="Makefile 实例"></a>Makefile 实例</h3><p>下面看一个简单的、实际的 <code>Makefile</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CC=gcc</span><br><span class="line">CPPFLAGS=</span><br><span class="line">CFLAGS=-O2 -pipe</span><br><span class="line">LDFLAGS=-s</span><br><span class="line">PREFIX=/usr</span><br><span class="line"></span><br><span class="line">all : prog1 prog2</span><br><span class="line"></span><br><span class="line">prog1 : prog1.o</span><br><span class="line">	$(CC) $(LDFLAGS) -o prog1 prog1.o</span><br><span class="line"></span><br><span class="line">prog1.o : prog1.c</span><br><span class="line">	$(CC) -c $(CFLAGS) prog1.c</span><br><span class="line"></span><br><span class="line">prog2 : prog2.o</span><br><span class="line">	$(CC) $(CFLAGS) $(LDFLAGS) -o prog2 prog2.o</span><br><span class="line"></span><br><span class="line">prog2.o : prog2.c</span><br><span class="line">	$(CC) -c $(CPPFLAGS) $(CFLAGS) prog2.c</span><br><span class="line"></span><br><span class="line">clean :</span><br><span class="line">	rm -f *.&#123;o,a&#125; prog&#123;1,2&#125;</span><br><span class="line"></span><br><span class="line">install : prog1 prog2</span><br><span class="line">	<span class="keyword">if</span> ( <span class="built_in">test</span> ! -d $(PREFIX)/bin ) ; <span class="keyword">then</span> mkdir -p $(PREFIX)/bin ; <span class="keyword">fi</span></span><br><span class="line">	cp -f prog1 $(PREFIX)/bin/prog1</span><br><span class="line">	cp -f prog2 $(PREFIX)/bin/prog2</span><br><span class="line"></span><br><span class="line">check <span class="built_in">test</span> : prog1 prog2</span><br><span class="line">	prog1 &lt; sample1.ref &gt; sample1.rz</span><br><span class="line">	prog1 &lt; sample2.ref &gt; sample3.rz</span><br><span class="line">	cmp sample1.ok sample1.rz</span><br><span class="line">	cmp sample2.ok sample2.rz</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<p>从中可以看出，<code>make</code> 与 <code>make all</code> 以及 <code>make prog1 prog2</code> 三条命令其实是等价的。而常用的 <code>make check</code> 和 <code>make install</code> 也找到了归属。同时我们也看到了 Makefile 中的各种变量是如何影响编译的。针对这个特定的 Makefile ，你甚至可以省略安装三步曲中的 make 命令而直接使用<code> make install</code> 进行安装。</p>
<p>同样，为了使用自定义的编译参数编译 prog2 ，我们可以使用 <code>make prog2 CFLAGS=&quot;-O3 -march=athlon64&quot;</code> 或 <code>CFLAGS=&quot;-O3 -march=athlon64&quot; &amp;&amp; make -e prog2</code> 命令达到此目的。</p>
<h3 id="Makefile-惯例"><a href="#Makefile-惯例" class="headerlink" title="Makefile 惯例"></a>Makefile 惯例</h3><p>下面是Makefile中一些约定俗成的目标名称及其含义：</p>
<p><code>all</code><br>编译整个软件包，但不重建任何文档。一般此目标作为默认的终极目标。此目标一般对所有源程序的编译和连接使用”-g”选项，以使最终的可执行程序中包含调试信息。可使用 strip 程序去掉这些调试符号。</p>
<p><code>clean</code><br>清除当前目录下在 make 过程中产生的文件。它不能删除软件包的配置文件，也不能删除 build 时创建的那些文件。</p>
<p><code>distclean</code><br>类似于”clean”，但增加删除当前目录下的的配置文件、build 过程产生的文件。</p>
<p><code>info</code><br>产生必要的 Info 文档。</p>
<p><code>check 或 test</code><br>完成所有的自检功能。在执行检查之前，应确保所有程序已经被创建(但可以尚未安装)。为了进行测试，需要实现在程序没有安装的情况下被执行的测试命令。</p>
<p><code>install</code><br>完成程序的编译并将最终的可执行程序、库文件等拷贝到指定的目录。此种安装一般不对可执行程序进行 strip 操作。</p>
<p><code>install-strip</code><br>和”install”类似，但是会对复制到安装目录下的可执行文件进行 strip 操作。</p>
<p><code>uninstall</code><br>删除所有由”install”安装的文件。</p>
<p><code>installcheck</code><br>执行安装检查。在执行安装检查之前，需要确保所有程序已经被创建并且被安装。</p>
<p><code>installdirs</code><br>创建安装目录及其子目录。它不能更改软件的编译目录，而仅仅是创建程序的安装目录。</p>
<p>下面是 Makefile 中一些约定俗成的变量名称及其含义：</p>
<p>这些约定俗成的变量分为三类。第一类代表可执行程序的名字，例如 CC 代表编译器这个可执行程序；第二类代表程序使用的参数(多个参数使用空格分开)，例如 CFLAGS 代表编译器执行时使用的参数(一种怪异的做法是直接在 CC 中包含参数)；第三类代表安装目录，例如 prefix 等等，含义简单，下面只列出它们的默认值。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">AR   函数库打包程序，可创建静态库.a文档。默认是<span class="string">&quot;ar&quot;</span>。</span><br><span class="line">AS   汇编程序。默认是<span class="string">&quot;as&quot;</span>。</span><br><span class="line">CC   C编译程序。默认是<span class="string">&quot;cc&quot;</span>。</span><br><span class="line">CXX  C++编译程序。默认是<span class="string">&quot;g++&quot;</span>。</span><br><span class="line">CPP  C/C++预处理器。默认是<span class="string">&quot;<span class="subst">$(CC)</span> -E&quot;</span>。</span><br><span class="line">FC   Fortran编译器。默认是<span class="string">&quot;f77&quot;</span>。</span><br><span class="line">PC   Pascal语言编译器。默认是<span class="string">&quot;pc&quot;</span>。</span><br><span class="line">YACC Yacc文法分析器。默认是<span class="string">&quot;yacc&quot;</span>。</span><br><span class="line"></span><br><span class="line">ARFLAGS     函数库打包程序的命令行参数。默认值是<span class="string">&quot;rv&quot;</span>。</span><br><span class="line">ASFLAGS     汇编程序的命令行参数。</span><br><span class="line">CFLAGS      C编译程序的命令行参数。</span><br><span class="line">CXXFLAGS    C++编译程序的命令行参数。</span><br><span class="line">CPPFLAGS    C/C++预处理器的命令行参数。</span><br><span class="line">FFLAGS      Fortran编译器的命令行参数。</span><br><span class="line">PFLAGS      Pascal编译器的命令行参数。</span><br><span class="line">YFLAGS      Yacc文法分析器的命令行参数。</span><br><span class="line">LDFLAGS     链接器的命令行参数。</span><br><span class="line"></span><br><span class="line">prefix      /usr/<span class="built_in">local</span></span><br><span class="line">exec_prefix $(prefix)</span><br><span class="line">bindir      $(exec_prefix)/bin</span><br><span class="line">sbindir     $(exec_prefix)/sbin</span><br><span class="line">libexecdir  $(exec_prefix)/libexec</span><br><span class="line">datadir     $(prefix)/share</span><br><span class="line">sysconfdir  $(prefix)/etc</span><br><span class="line">sharedstatedir $(prefix)/com</span><br><span class="line">localstatedir  $(prefix)/var</span><br><span class="line">libdir      $(exec_prefix)/lib</span><br><span class="line">infodir     $(prefix)/info</span><br><span class="line">includedir  $(prefix)/include</span><br><span class="line">oldincludedir  $(prefix)/include</span><br><span class="line">mandir      $(prefix)/man</span><br><span class="line">srcdir      需要编译的源文件所在的目录，无默认值</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="make-选项"><a href="#make-选项" class="headerlink" title="make 选项"></a>make 选项</h3><p>最后说说 make 的命令行选项(以Make-3.81版本为准)：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`-B, --always-make`</span><br><span class="line">无条件的重建所有规则的目标，而不是根据规则的依赖关系决定是否重建某些目标文件。</span><br><span class="line"></span><br><span class="line">`-C DIR, --directory=DIR`</span><br><span class="line">在做任何动作之前先切换工作目录到 DIR ，然后再执行 make 程序。</span><br><span class="line"></span><br><span class="line">`-d`</span><br><span class="line">在 make 执行过程中打印出所有的调试信息。包括：make 认为那些文件需要重建；那些文件需要比较它们的最后修改时间、比较的结果；重建目标所要执行的命令；使用的隐含规则等。使用该选项我们可以看到 make 构造依赖关系链、重建目标过程的所有信息，它等效于&quot;-debug=a&quot;。</span><br><span class="line"></span><br><span class="line">`--debug=FLAGS`</span><br><span class="line">    在 make 执行过程中打印出调试信息。FLAGS 用于控制调试信息级别：</span><br><span class="line">    a 输出所有类型的调试信息</span><br><span class="line">    b 输出基本调试信息。包括：那些目标过期、是否重建成功过期目标文件。</span><br><span class="line">    v 除 b 级别以外还包括：解析的 makefile 文件名，不需要重建文件等。</span><br><span class="line">    i 除 b 级别以外还包括：所有使用到的隐含规则描述。</span><br><span class="line">    j 输出所有执行命令的子进程，包括命令执行的 PID 等。</span><br><span class="line">    m 输出 make 读取、更新、执行 makefile 的信息。</span><br><span class="line"></span><br><span class="line">`-e, --environment-overrides`  </span><br><span class="line">使用系统环境变量的定义覆盖 Makefile 中的同名变量定义。</span><br><span class="line"></span><br><span class="line">`-f FILE, --file=FILE, --makefile=FILE`  </span><br><span class="line">将 FILE 指定为 Makefile 文件。</span><br><span class="line"></span><br><span class="line">`-h, --help`  </span><br><span class="line">打印帮助信息。</span><br><span class="line"></span><br><span class="line">`-i, --ignore-errors`  </span><br><span class="line">忽略规则命令执行过程中的错误。</span><br><span class="line"></span><br><span class="line">`-I DIR, --include-dir=DIR`  </span><br><span class="line">指定包含 Makefile 文件的搜索目录。使用多个&quot;-I&quot;指定目录时，搜索目录按照指定顺序进行。</span><br><span class="line"></span><br><span class="line">`-j [N], --jobs[=N]`  </span><br><span class="line">指定并行执行的命令数目。在没有指定&quot;-j&quot;参数的情况下，执行的命令数目将是系统允许的最大可能数目。</span><br><span class="line"></span><br><span class="line">`-k, --keep-going`  </span><br><span class="line">遇见命令执行错误时不终止 make 的执行，也就是尽可能执行所有的命令，直到出现致命错误才终止。</span><br><span class="line"></span><br><span class="line">`-l [N], --load-average[=N], --max-load[=N]`  </span><br><span class="line">如果系统负荷超过 LOAD(浮点数)，不再启动新任务。</span><br><span class="line"></span><br><span class="line">`-L, --check-symlink-times`  </span><br><span class="line">同时考察符号连接的时间戳和它所指向的目标文件的时间戳，以两者中较晚的时间戳为准。</span><br><span class="line"> </span><br><span class="line">`-n, --just-print, --dry-run, --recon`  </span><br><span class="line">  只打印出所要执行的命令，但并不实际执行命令。</span><br><span class="line">  </span><br><span class="line">`-o FILE, --old-file=FILE, --assume-old=FILE`  </span><br><span class="line">即使相对于它的依赖已经过期也不重建 FILE 文件；同时也不重建依赖于此文件任何文件。</span><br><span class="line"></span><br><span class="line">`-p, --print-data-base`  </span><br><span class="line">命令执行之前，打印出 make 读取的 Makefile 的所有数据（包括规则和变量的值），同时打印出 make 的版本信息。如果只需要打印这些数据信息，可以使用 make -qp 命令。查看 make 执行前的预设规则和变量，可使用命令 make -p -f /dev/null 。</span><br><span class="line"></span><br><span class="line">`-q, --question`  </span><br><span class="line">&quot;询问模式&quot;。不运行任何命令，并且无输出，只是返回一个查询状态。返回状态为 0 表示没有目标需要重建，1 表示存在需要重建的目标，2 表示有错误发生。</span><br><span class="line"> </span><br><span class="line">`-r, --no-builtin-rules`  </span><br><span class="line">取消所有内嵌的隐含规则，不过你可以在 Makefile 中使用模式规则来定义规则。同时还会取消所有支持后追规则的隐含后缀列表，同样我们也可以在 Makefile 中使用&quot;.SUFFIXES&quot;定义我们自己的后缀规则。此选项不会取消 make 内嵌的隐含变量。</span><br><span class="line"></span><br><span class="line">`-R, --no-builtin-variables`   </span><br><span class="line">取消 make 内嵌的隐含变量，不过我们可以在 Makefile 中明确定义某些变量。注意，此选项同时打开了&quot;-r&quot;选项。因为隐含规则是以内嵌的隐含变量为基础的。</span><br><span class="line"></span><br><span class="line">`-s, --silent, --quiet`  </span><br><span class="line">不显示所执行的命令。</span><br><span class="line"></span><br><span class="line">`-S, --no-keep-going, --stop`  </span><br><span class="line">取消&quot;-k&quot;选项。在递归的 make 过程中子 make 通过 MAKEFLAGS 变量继承了上层的命令行选项。我们可以在子 make 中使用&quot;-S&quot;选项取消上层传递的&quot;-k&quot;选项，或者取消系统环境变量 MAKEFLAGS 中的&quot;-k&quot;选项。</span><br><span class="line"></span><br><span class="line">`-t, --touch`  </span><br><span class="line">更新所有目标文件的时间戳到当前系统时间。防止 make 对所有过时目标文件的重建。</span><br><span class="line"></span><br><span class="line">`-v, --version`  </span><br><span class="line">打印版本信息。</span><br><span class="line"></span><br><span class="line">`-w, --print-directory`  </span><br><span class="line">在 make 进入一个目录之前打印工作目录。使用&quot;-C&quot;选项时默认打开这个选项。</span><br><span class="line"></span><br><span class="line">--no-print-directory </span><br><span class="line">取消&quot;-w&quot;选项。可以是用在递归的 make 调用过程中，取消&quot;-C&quot;参数将默认打开&quot;-w&quot;</span><br><span class="line"></span><br><span class="line">-W FILE, --what-if=FILE, --new-file=FILE, --assume-new=FILE</span><br><span class="line">设定 FILE 文件的时间戳为当前时间，但不改变文件实际的最后修改时间。此选项主要是为实现了对所有依赖于 FILE 文件的目标的强制重建。</span><br><span class="line"></span><br><span class="line">--warn-undefined-variables </span><br><span class="line">在发现 Makefile 中存在对未定义的变量进行引用时给出告警信息。此功能可以帮助我们调试一个存在多级套嵌变量引用的复杂 Makefile 。但是：我们建议在书写 Makefile 时尽量避免超过三级以上的变量套嵌引用。</span><br></pre></td></tr></table></figure>


<h2 id="configure"><a href="#configure" class="headerlink" title="configure"></a><a id="Configure">configure</a></h2><p>此阶段的主要目的是生成 Makefile 文件，是最关键的运筹帷幄阶段，基本上所有可以对安装过程进行的个性化调整都集中在这一步。</p>
<p>configure 脚本能够对 Makefile 中的哪些内容产生影响呢？基本上可以这么说：所有内容，包括本文最关心的 Makefile 规则与 Makefile 变量。那么又是哪些因素影响着最终生成的 Makefile 文件呢？答曰：系统环境和配置选项。</p>
<p>配置选项的影响是显而易见的。但是”系统环境”的概念却很宽泛，包含很多方面内容，不过我们这里只关心环境变量，具体说来就是将来会在 Makefile 中使用到的环境变量以及与 Makefile 中的变量同名的环境变量。</p>
<h3 id="通用-configure-语法"><a href="#通用-configure-语法" class="headerlink" title="通用 configure 语法"></a>通用 configure 语法</h3><p>在进一步讲述之前，先看看 configure 脚本的语法，一般有两种：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">configure [OPTIONS] [VAR=VALUE]...</span><br><span class="line"></span><br><span class="line">configure [OPTIONS] [HOST]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>不管是哪种语法，我们都可以用 <code>configure --help</code> 查看所有可用的<code>[OPTIONS]</code>，并且通常在结尾部分还能看到这个脚本所关心的环境变量有哪些。在本文中将对这两种语法进行合并，使用下面这种简化的语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">configure [OPTIONS]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这种语法能够被所有的 <code>configure</code> 脚本所识别，同时也能通过设置环境变量和使用特定的<code>[OPTIONS]</code>完成上述两种语法的一切功能。</p>
<h3 id="通用-configure-选项"><a href="#通用-configure-选项" class="headerlink" title="通用 configure 选项"></a>通用 configure 选项</h3><p>虽然每个软件包的 configure 脚本千差万别，但是它们却都有一些共同的选项，也基本上都遵守相同的选项语法。</p>
<p><strong>脚本自身选项</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">--<span class="built_in">help</span>  </span><br><span class="line">显示帮助信息。</span><br><span class="line"></span><br><span class="line">--version  </span><br><span class="line">显示版本信息。</span><br><span class="line"></span><br><span class="line">--cache-file=FILE  </span><br><span class="line">在FILE文件中缓存测试结果(默认禁用)。</span><br><span class="line"></span><br><span class="line">--no-create  </span><br><span class="line">configure脚本运行结束后不输出结果文件，常用于正式编译前的测试。</span><br><span class="line"></span><br><span class="line">--quiet, --silent  </span><br><span class="line">不显示脚本工作期间输出的<span class="string">&quot;checking ...&quot;</span>消息。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>目录选项</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">--srcdir=DIR  </span><br><span class="line">源代码文件所在目录，默认为configure脚本所在目录或其父目录。</span><br><span class="line"></span><br><span class="line">--prefix=PREFIX  </span><br><span class="line">体系无关文件的顶级安装目录PREFIX ，默认值一般是 /usr/<span class="built_in">local</span> 或 /usr/<span class="built_in">local</span>/pkgName</span><br><span class="line"></span><br><span class="line">--exec-prefix=EPREFIX  </span><br><span class="line">体系相关文件的顶级安装目录EPREFIX ，默认值一般是 PREFIX</span><br><span class="line"></span><br><span class="line">--bindir=DIR  </span><br><span class="line">用户可执行文件的存放目录DIR ，默认值一般是 EPREFIX/bin</span><br><span class="line"></span><br><span class="line">--sbindir=DIR  </span><br><span class="line">系统管理员可执行目录DIR ，默认值一般是 EPREFIX/sbin</span><br><span class="line"></span><br><span class="line">--libexecdir=DIR  </span><br><span class="line">程序可执行目录DIR ，默认值一般是 EPREFIX/libexec</span><br><span class="line"></span><br><span class="line">--datadir=DIR  </span><br><span class="line">通用数据文件的安装目录DIR ，默认值一般是 PREFIX/share</span><br><span class="line"></span><br><span class="line">--sysconfdir=DIR  </span><br><span class="line">只读的单一机器数据目录DIR ，默认值一般是 PREFIX/etc</span><br><span class="line"></span><br><span class="line">--sharedstatedir=DIR  </span><br><span class="line">可写的体系无关数据目录DIR ，默认值一般是 PREFIX/com</span><br><span class="line"></span><br><span class="line">--localstatedir=DIR  </span><br><span class="line">可写的单一机器数据目录DIR ，默认值一般是 PREFIX/var</span><br><span class="line"></span><br><span class="line">--libdir=DIR  </span><br><span class="line">库文件的安装目录DIR ，默认值一般是 EPREFIX/lib</span><br><span class="line"></span><br><span class="line">--includedir=DIR  </span><br><span class="line">C头文件目录DIR ，默认值一般是 PREFIX/include</span><br><span class="line"></span><br><span class="line">--oldincludedir=DIR  </span><br><span class="line">非gcc的C头文件目录DIR ，默认值一般是 /usr/include</span><br><span class="line"></span><br><span class="line">--infodir=DIR  </span><br><span class="line">Info文档的安装目录DIR ，默认值一般是 PREFIX/info</span><br><span class="line"></span><br><span class="line">--mandir=DIR  </span><br><span class="line">Man文档的安装目录DIR ，默认值一般是 PREFIX/man</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>体系结构选项</strong></p>
<p>玩交叉编译的朋友对这些选项已经很熟悉了，对于不使用交叉编译的朋友也不必担心，不要理它们就可以了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">--build=BUILD  </span><br><span class="line">工具链当前的运行环境，默认是 config.guess 脚本的输出结果。</span><br><span class="line"></span><br><span class="line">--host=HOST  </span><br><span class="line">编译出的二进制代码将要运行在HOST上，默认值是BUILD。</span><br><span class="line"></span><br><span class="line">--target=TARGET  </span><br><span class="line">编译出的工具链所将来生成的二进制代码要在TARGET上运行，这个选项仅对工具链(也就是GCC和Binutils两者)有意义。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>特性选项</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">--enable-FEATURE  </span><br><span class="line">启用FEATURE特性</span><br><span class="line"></span><br><span class="line">--disable-FEATURE  </span><br><span class="line">禁用FEATURE特性</span><br><span class="line"></span><br><span class="line">--with-PACKAGE[=DIR]  </span><br><span class="line">启用附加软件包PACKAGE，亦可同时指定PACKAGE所在目录DIR</span><br><span class="line"></span><br><span class="line">--without-PACKAGE  </span><br><span class="line">禁用附加软件包PACKAGE</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>通用环境变量</strong></p>
<p>除了上述通用的选项外，下列环境变量影响着最终生成的 Makefile 文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CPP  </span><br><span class="line">C预处理器命令  </span><br><span class="line"></span><br><span class="line">CXXCPP  </span><br><span class="line">C++预处理器命令</span><br><span class="line"></span><br><span class="line">CPPFLAGS  </span><br><span class="line">C/C++预处理器命令行参数</span><br><span class="line"></span><br><span class="line">CC  </span><br><span class="line">C编译器命令</span><br><span class="line"></span><br><span class="line">CFLAGS  </span><br><span class="line">C编译器命令行参数</span><br><span class="line"></span><br><span class="line">CXX  </span><br><span class="line">C++编译器命令</span><br><span class="line"></span><br><span class="line">CXXFLAGS  </span><br><span class="line">C++编译器命令行参数</span><br><span class="line"></span><br><span class="line">LDFLAGS  </span><br><span class="line">连接器命令行参数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>至于设置这些环境变量的方法，你可以将它们 <code>export</code> 为全局变量在全局范围内使用，也可以在命令行上使用 <code>[VAR=VALUE]... configure [OPTIONS]</code> 的语法局部使用。此处就不详细描述了。</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>柯小小西
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://ketao1989.github.io/2014/06/24/2014-06-24-Linux-Software-Install-Understand/" title="深入理解软件包的配置、编译与安装">https://ketao1989.github.io/2014/06/24/2014-06-24-Linux-Software-Install-Understand/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2014/06/10/2014-06-10-Ubuntu-Chrome-Start-Fail-Resolve/" rel="prev" title="Ubuntu Chrome启动失败解决方法">
      <i class="fa fa-chevron-left"></i> Ubuntu Chrome启动失败解决方法
    </a></div>
      <div class="post-nav-item">
    <a href="/2014/06/27/2014-06-27-Intelij-IDEA-Keymap/" rel="next" title="常用快捷键（备用）">
      常用快捷键（备用） <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">2.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Makefile-%E4%B8%8E-make"><span class="nav-number">3.</span> <span class="nav-text">Makefile 与 make</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#make-%E8%AF%AD%E6%B3%95"><span class="nav-number">3.1.</span> <span class="nav-text">make 语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Makefile-%E8%A7%84%E5%88%99"><span class="nav-number">3.2.</span> <span class="nav-text">Makefile 规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Makefile-%E5%AE%9E%E4%BE%8B"><span class="nav-number">3.3.</span> <span class="nav-text">Makefile 实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Makefile-%E6%83%AF%E4%BE%8B"><span class="nav-number">3.4.</span> <span class="nav-text">Makefile 惯例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#make-%E9%80%89%E9%A1%B9"><span class="nav-number">3.5.</span> <span class="nav-text">make 选项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#configure"><span class="nav-number">4.</span> <span class="nav-text">configure</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E7%94%A8-configure-%E8%AF%AD%E6%B3%95"><span class="nav-number">4.1.</span> <span class="nav-text">通用 configure 语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E7%94%A8-configure-%E9%80%89%E9%A1%B9"><span class="nav-number">4.2.</span> <span class="nav-text">通用 configure 选项</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="柯小小西"
      src="/images/ava.gif">
  <p class="site-author-name" itemprop="name">柯小小西</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">63</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">柯小小西</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">571k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">8:39</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '8a8454cf0d89ff4ed454',
      clientSecret: '784e8e608e1ca4945c73aa268a1c4b1125347047',
      repo        : 'ketao1989.github.io',
      owner       : 'ketao1989',
      admin       : ['ketao1989'],
      id          : 'ca3002492a9ceb11548a5d7b5e9a17c7',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
